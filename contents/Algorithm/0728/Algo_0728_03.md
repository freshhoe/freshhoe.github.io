---
date: '2021-07-28'
title: '[JS Algo] 후위식 연산(postfix)'
categories: ['Algorithm', 'JavaScript']
summary: ''
thumbnail: './Algorithm.png'
---

## Q. 후위식 연산(postfix)

<details>
<summary></summary>
<div markdown="1">

후위연산식이 주어지면 연산한 결과를 출력해야합니다.
ex) 3*(5+2)-9
후위연산식: 352+*9-
결과: 12

</div>
</details>

## A. 풀이

후위 연산에 대한 이해가 필요합니다. 이진 트리 상에서 왼쪽 노드 -> 오른쪽 노드 -> 부모 노드 순으로 방문합니다.
따라서 연산자가 부모노드가 됩니다. <br>
`stack`을 사용해 숫자를 쌓고 연산자가 조회되면 `stack` 의 `top` 과 `top-1` 숫자를 연산자를 통해 연산합니다.<br>
`isNaN()` 경우 온전히 `NaN` 체크 불가합니다. MDN 문서에서는 ES6부터 나온 `Number.isNaN()` 사용을 추천하고 있습니다.
아래와 같이 조건문을 여러개 사용해도 되지만, 연산자를 문자가 아닌 코드로 취급하기 위한 방법도 있습니다.
이 역시 MDN에서 `eval()` 은 보안에 취약하기 때문에 `Function()()` 을 사용한 방법을 추천하고 있습니다.

```javascript
// 후위식 연산(postfix)
function solution(s) {
  let answer;
  let stack = [];
  for (let i = 0; i < s.length; i++) {
    if (!isNaN(Number(s[i]))) {
      stack.push(Number(s[i]));
    } else {
      let right = stack.pop();
      let left = stack.pop();
      if (s[i] === '+') stack.push(left + right);
      else if (s[i] === '-') stack.push(left - right);
      else if (s[i] === '*') stack.push(left * right);
      else if (s[i] === '/') stack.push(left / right);
    }
  }
  return (answer = stack[0]);
}
console.log(solution('352+*9-')); // 12
// isNaN() 경우 완전한 NaN 체크 불가. ES6부터 나온 Number.isNaN() 사용 추천
// eval()는 보안 위험이 있음. 아래와 같은 방식 추천
function solution(s) {
  let answer;
  let stack = [];
  for (let i = 0; i < s.length; i++) {
    if (!isNaN(Number(s[i]))) {
      stack.push(Number(s[i]));
    } else {
      let right = stack.pop();
      let left = stack.pop();
      stack.push(
        Function('"use strict";return (' + left + s[i] + right + ');')(),
      );
    }
  }
  return (answer = stack[0]);
}
console.log(solution('352+*9-')); // 12
```

<details>
<summary></summary>
<div markdown="1">

#### 참고) 전위, 중위, 후위

이진 트리를 기준으로 설명합니다. <br>
ex) [1, 2, 3, 4, 5, 6, 7] 배열을 이진트리로 생각해봅니다.

- 전위 방문 순서 : 부모 -> 왼쪽 -> 오른쪽
  ex) 1, 2, 4, 5, 3, 6, 7
- 중위 방문 순서 : 왼쪽 -> 부모 -> 오른쪽
  ex) 4, 2, 5, 1, 6, 3, 7
- 후위 방문 순서 : 왼쪽 -> 오른쪽 -> 부모
ex) 4, 5, 2, 6, 7, 3, 1
</div>
</details>
